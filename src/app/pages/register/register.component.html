<h2>Registro</h2>
<form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
  <div class="input-group">
    <label for="firstName">Nombre(s)</label>
    <input type="text" id="firstName" formControlName="firstName" placeholder="Tu nombre(s)">
    <div *ngIf="registerForm.get('firstName')?.invalid && (registerForm.get('firstName')?.dirty || registerForm.get('firstName')?.touched)" class="error-messages">
      <small *ngIf="registerForm.get('firstName')?.errors?.['required']">Tu nombre es requerido.</small>
    </div>
  </div>

  <div class="input-group">
    <label for="lastName">Apellidos</label>
    <input type="text" id="lastName" formControlName="lastName" placeholder="Tus apellidos">
    <div *ngIf="registerForm.get('lastName')?.invalid && (registerForm.get('lastName')?.dirty || registerForm.get('lastName')?.touched)" class="error-messages">
      <small *ngIf="registerForm.get('lastName')?.errors?.['required']">Tus apellidos son requeridos.</small>
      </div>
  </div>

  <div class="input-group">
    <label for="dateOfBirth">Fecha de Nacimiento</label>
    <input type="date" id="dateOfBirth" formControlName="dateOfBirth">
    <div *ngIf="registerForm.get('dateOfBirth')?.invalid && (registerForm.get('dateOfBirth')?.dirty || registerForm.get('dateOfBirth')?.touched)" class="error-messages">
      <small *ngIf="registerForm.get('dateOfBirth')?.errors?.['required']">La fecha de nacimiento es requerida.</small>
      </div>
  </div>

  <div class="input-group">
    <label for="reg-email">Email</label>
    <input type="email" id="reg-email" formControlName="email" placeholder="Ingresa tu email">
    <div *ngIf="registerForm.get('email')?.invalid && (registerForm.get('email')?.dirty || registerForm.get('email')?.touched)" class="error-messages">
      <small *ngIf="registerForm.get('email')?.errors?.['required']">El correo es requerido.</small>
      <small *ngIf="registerForm.get('email')?.errors?.['email']">El formato del correo no es válido.</small>
    </div>
  </div>

  <div class="input-group">
    <label for="reg-password">Password</label>
    <input type="password" id="reg-password" formControlName="password" placeholder="Crea una contraseña">
    <div *ngIf="registerForm.get('password')?.invalid && (registerForm.get('password')?.dirty || registerForm.get('password')?.touched)" class="error-messages">
      <small *ngIf="registerForm.get('password')?.errors?.['required']">La contraseña es requerida.</small>
      <small *ngIf="registerForm.get('password')?.errors?.['minlength']">La contraseña debe tener al menos 6 caracteres.</small>
    </div>
  </div>

  <div class="input-group">
    <label for="reg-confirm-password">Confirmar Contraseña</label>
    <input type="password" id="reg-confirm-password" formControlName="confirmPassword" placeholder="Confirma tu contraseña">
    <div *ngIf="registerForm.get('confirmPassword')?.invalid && (registerForm.get('confirmPassword')?.dirty || registerForm.get('confirmPassword')?.touched)" class="error-messages">
      <small *ngIf="registerForm.get('confirmPassword')?.errors?.['required']">Confirmar la contraseña es requerido.</small>
    </div>
    <div *ngIf="registerForm.errors?.['passwordMismatch'] && (registerForm.get('confirmPassword')?.dirty || registerForm.get('confirmPassword')?.touched)" class="error-messages">
        <small>Las contraseñas no coinciden.</small>
    </div>
  </div>

  <div *ngIf="errorMessage" class="error-messages server-error">
    {{ errorMessage }}
  </div>

  <button type="submit" class="register-button" [disabled]="registerForm.invalid || isLoading">
    {{ isLoading ? 'Registrando...' : 'Registro' }}
  </button>
</form>
